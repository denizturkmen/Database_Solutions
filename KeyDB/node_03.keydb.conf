port 6379
bind 0.0.0.0
protected-mode no

requirepass YourStrongPass!
masterauth YourStrongPass!

# Multi-master
multi-master yes
active-replica yes

# Replicate from the other two masters
replicaof 192.168.1.40 6379
replicaof 192.168.1.41 6379

# Durability (balanced)
appendonly yes
appendfsync everysec
save 900 1
save 300 10
save 60 10000

# Memory policy (5 GiB max; adjust as needed)
maxmemory 5800mb
maxmemory-policy allkeys-lru

# Performance & networking
tcp-backlog 65535
repl-diskless-sync yes
repl-backlog-size 128mb
client-output-buffer-limit normal 0 0 0
client-output-buffer-limit replica 512mb 128mb 60

# Threads for 4 vCPU
server-threads 4

# Log to STDOUT (avoid file permission issues)
# logfile ""
